# 10장 렌더링 엔진

## 10.1 깊이 버퍼를 이용한 삼각형 래스터화의 기초

> 렌더링 과정 요약

* 수학적 형태로 표현된 3차원의 가상 장면을 구성하기
* 가상 카메라의 위치 방향 잡기
* 광원 정의
* 빛이 표면들과 어떻게 상호작용할 것인가 결정
* 가상 카메라 초점으로 빛의 색과 강도 계산

실시간 렌더링 엔진은 위의 단계를 계속 반복한다. 그려진 이미지를 초당 30~60번씩 보여주면서 움직이는 효과를 만든다.

### 10.1.1 장면 구성

장면은 다양한 물체들로 이루어진다. 불투명한 물체를 그릴 때는 물체의 표면만 고려해도 되지만 투명하거나 반투명한 물체들은 빛의 반산, 굴절, 산란,흡수 등을 고려해야 한다. 이를 표현하기 위해서는 물체 내부의 구조와 특성들도 알아야 한다.

하지만 대부분 게임 엔진은 이를 정밀하게 표현하기 보다는 단순하게 알파 값을 조정해서 물체의 투명도만을 조절한다. 이상하게 보일 수도 있지만 어느 정도는 그럴 듯하게 보이는 효과를 만들 수 있다.

연기 등 일정한 형상이 없는 것들은 반투명한 사각형 판들로 파티클을 만들어 구현하는 경우가 일반적이다.

#### 10.1.1.1 고성능 렌더링 프로그램에서 쓰이는 형식

이론적으로 표면이란 3차원 공간에 있는 무한히 많은 점들로 이루어진 2차원 평면이다. 이 정의를 그대로 사용할 수 없기 때문에 단순한 수식으로 표현해야 한다.

> 표면 방정식
* 이 방법은 임의 형상을 모델링하는데 효과적이지 않다.

> 사각현 Patch
* 영화의 컴퓨터 그래픽(CG)에 주로 사용된다.
* Patch는 적은 수의 컨트롤 포인트에 의해 정의 되는 2차원 스플라인(질문1)으로 구성된다.

> 분할 표면 (subdivision surface)
* 픽사의 렌더링 엔진 RenderMan이 사용하는 방식이다.
* 모든 표면은 컨트롤 다각형으로 표현한다.
* Catmull-Clark 알고리즘을 이용하면 다각형을 계속 더 작은 다각형으로 재분할 할 수 있다.
* 재분할은 한 픽셀보다 작아질 때까지 반복한다.
* 이 방식을 사용하면 카메라가 아무리 표면 가까이 다가가도 계속 재분할 하기 때문에 표면을 매끄럽게 표현할 수 있다.

#### 10.1.1.2 삼각형 메시

이전부터 게임 개발자들은 삼각형 메시를 이용해 표면을 표현했다.

# 질문들
> 1.스플라인(Spline)
* https://wonjayk.tistory.com/95
* 뭥가 보간법 같음
